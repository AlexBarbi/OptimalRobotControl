# TSID Biped Robot Controller

This repository implements a **Task Space Inverse Dynamics (TSID)** controller for bipedal robots (e.g., Romeo, Talos) using the `tsid` library and `pinocchio`. It allows for simulating bipedal locomotion, including maintaining balance and tracking walking trajectories.

## üìÇ Repository Structure

- **`tsid_biped.py`**: The main class `TsidBiped` that sets up the TSID problem. It defines the tasks (Center of Mass, Posture, Feet tracking), contact constraints, and the solver.
- **`ex_1_biped.py`**: A basic example where the robot stands on both feet and tracks a sinusoidal Center of Mass (CoM) reference.
- **`ex_2_biped_walking.py`**: A more advanced walking simulation. It reads pre-computed CoM and Foot trajectories and executes a walking pattern.
- **`romeo_conf.py`**: Configuration parameters for the **Romeo** robot (gains, weights, initial state, etc.).
- **`talos_conf.py`**: Configuration parameters for the **Talos** robot.
- **`plot_utils.py`**: Helper functions for plotting simulation results using `matplotlib`.

## üõ† Dependencies

This project relies on the Stack-of-Tasks ecosystem. Key dependencies include:

- [Pinocchio](https://github.com/stack-of-tasks/pinocchio) (Rigid Body Dynamics)
- [TSID](https://github.com/stack-of-tasks/tsid) (Task Space Inverse Dynamics)
- [Example Robot Data](https://github.com/gepetto/example-robot-data) (Robot URDFs)
- `numpy`
- `matplotlib`

## üöÄ Usage

### 1. CoM Sinusoidal Tracking (Standing)
This example simulates the robot maintaining a static double-support phase while tracking a changing CoM target.

```bash
python ex_1_biped.py
```

### 2. Walking Simulation
This example simulates a walking cycle.

**‚ö†Ô∏è Note:** This script requires pre-computed trajectory files (e.g., `romeo_walking_traj030.npz`). These files are typically generated by an LIPM (Linear Inverted Pendulum Mode) Optimal Control Problem solver.

If you have the trajectory files, ensure `romeo_conf.py` points to the correct `DATA_FILE_TSID` path, then run:

```bash
python ex_2_biped_walking.py
```

If the data files are missing, the script will raise a `FileNotFoundError`.

## ‚öôÔ∏è Configuration

You can modify control parameters in the configuration files (`romeo_conf.py` / `talos_conf.py`):
- **Weights (`w_*`)**: Priority of different tasks (CoM, posture, contacts).
- **Gains (`kp_*`)**: Proportional gains for task tracking.
- **Simulation params**: Time step (`dt`), duration, etc.

## üìä Visualization

The simulations use **Meshcat** for 3D visualization by default. When you run a script, it will initialize a viewer. Open the URL provided in the terminal (usually `http://127.0.0.1:7000/static/`) to watch the robot.
